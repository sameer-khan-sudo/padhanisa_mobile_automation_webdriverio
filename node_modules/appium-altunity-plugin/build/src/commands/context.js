"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.setContext = exports.getCurrentContext = exports.getContexts = void 0;
const __1 = require("..");
async function getContexts(next) {
    let existingContexts = [];
    try {
        existingContexts = await next();
    }
    catch (err) {
        this.logger.info(`Default behavior failed handling getContexts, ignoring`);
        this.logger.info(`Original error: ${err}`);
    }
    return [...existingContexts, __1.UNITY_CONTEXT];
}
exports.getContexts = getContexts;
async function getCurrentContext(next) {
    if (this.isInUnityContext) {
        return __1.UNITY_CONTEXT;
    }
    try {
        return await next();
    }
    catch (err) {
        this.logger.info(`Default behavior failed handling getContext, ignoring`);
        this.logger.info(`Original error: ${err}`);
        return null;
    }
}
exports.getCurrentContext = getCurrentContext;
async function setContext(next, name) {
    if (name !== __1.UNITY_CONTEXT) {
        this.isInUnityContext = false;
        try {
            return await next();
        }
        catch (err) {
            this.logger.info(`Default behavior failed handling setContext, ignoring`);
            this.logger.info(`Original error: ${err}`);
        }
    }
    this.isInUnityContext = true;
}
exports.setContext = setContext;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGV4dC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tYW5kcy9jb250ZXh0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUNBLDBCQUFrRDtBQUUzQyxLQUFLLFVBQVUsV0FBVyxDQUF1QixJQUFpQjtJQUNyRSxJQUFJLGdCQUFnQixHQUFHLEVBQUUsQ0FBQTtJQUN6QixJQUFJO1FBQ0EsZ0JBQWdCLEdBQUcsTUFBTSxJQUFJLEVBQUUsQ0FBQTtLQUNsQztJQUFDLE9BQU8sR0FBRyxFQUFFO1FBQ1YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsd0RBQXdELENBQUMsQ0FBQTtRQUMxRSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxFQUFFLENBQUMsQ0FBQTtLQUM3QztJQUNELE9BQU8sQ0FBQyxHQUFHLGdCQUFnQixFQUFFLGlCQUFhLENBQUMsQ0FBQTtBQUMvQyxDQUFDO0FBVEQsa0NBU0M7QUFFTSxLQUFLLFVBQVUsaUJBQWlCLENBQXVCLElBQWlCO0lBQzNFLElBQUksSUFBSSxDQUFDLGdCQUFnQixFQUFFO1FBQ3ZCLE9BQU8saUJBQWEsQ0FBQTtLQUN2QjtJQUNELElBQUk7UUFDQSxPQUFPLE1BQU0sSUFBSSxFQUFFLENBQUE7S0FDdEI7SUFBQyxPQUFPLEdBQUcsRUFBRTtRQUNWLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLHVEQUF1RCxDQUFDLENBQUE7UUFDekUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsbUJBQW1CLEdBQUcsRUFBRSxDQUFDLENBQUE7UUFDMUMsT0FBTyxJQUFJLENBQUE7S0FDZDtBQUNMLENBQUM7QUFYRCw4Q0FXQztBQUVNLEtBQUssVUFBVSxVQUFVLENBQXVCLElBQWlCLEVBQUUsSUFBWTtJQUNsRixJQUFJLElBQUksS0FBSyxpQkFBYSxFQUFFO1FBQ3hCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxLQUFLLENBQUE7UUFDN0IsSUFBSTtZQUNBLE9BQU8sTUFBTSxJQUFJLEVBQUUsQ0FBQTtTQUN0QjtRQUFDLE9BQU8sR0FBRyxFQUFFO1lBQ1YsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsdURBQXVELENBQUMsQ0FBQTtZQUN6RSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxFQUFFLENBQUMsQ0FBQTtTQUM3QztLQUNKO0lBQ0QsSUFBSSxDQUFDLGdCQUFnQixHQUFHLElBQUksQ0FBQTtBQUNoQyxDQUFDO0FBWEQsZ0NBV0MifQ==